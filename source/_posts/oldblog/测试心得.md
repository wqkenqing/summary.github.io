---

title: 测试心得
date: 2019-07-16
tags: linux

---

此处简介
<!--more-->

#测试环境搭建小结
`因一些原因，最近协助搭建测试服务器，主要涉及到了一服务器系统安装，环境配置，参数调优，软件使用，自动化建设等内容，因为主要是协助，所以着重小结我参与的部份`
## 参数调优
这里的参数调优主要针对的是服务器的调优，主要是针对出现问题后的调优，这次软件使用上大致问题有
+ oom
+ ioStream
+ 端口数不足
+ pid分配不够等问题

### om
对oom的调优主要的动作有调大分配给jvm的内存，但光调大内存不一定能解决问题，当遇到大量创建线程，但linux服务器允许该用户的执行的线程数不够时，会报无法创建的问题，严重会致使无法执行。所以还需要调大用户的进程数，查看用户信息通过ulimit -a
### ioStream
这个是io问题，经分析出现这个问题的主要原因应该该用户下限制了最大文件打开数，所以通过ulimit -n numbers即可调大该值
但有时退出后可能会重新复原，所以需要长久变更可设置在.bashrc文件中
### 端口数不足
这是并发测试web接口时，发送的请求动作的完成需要时间，本机设置的端口区间可能无法满足大批量的端口需求，所以需要进行重新设置，主要方式是调大区间，调低端口被释放时间等

 第一步，修改/etc/sysctl.conf文件，在文件中添加如下行：
   net.ipv4.ip_local_port_range = 1024 65000
   这表明将系统对本地端口范围限制设置为1024~65000之间。请注意，本地端口范围的最小值必须大于或等于1024；而端口范围的最大值则应小于或等于65535。修改完后保存此文件。
[解决方案]([http://blog.sina.com.cn/s/blog_658c8cea0101l2sw.html)][1]
[解决方案2](http://blog.chinaunix.net/uid-24907956-id-3428052.html)
### pid分配不够等问题
[pid分配不够](http://blog.csdn.net/cfaster/article/details/53065738)


  [1]: http://blog.sina.com.cn/s/blog_658c8cea0101l2sw.html%29
  [2]: http://blog.sina.com.cn/s/blog_658c8cea0101l2sw.html%29
